<!-- loioee8726adfdb34d748ed199f0275472f8 -->

| loio |
| -----|
| ee8726adfdb34d748ed199f0275472f8 |

<div id="loio">

view on: [demo kit nightly build](https://openui5nightly.hana.ondemand.com/#/topic/ee8726adfdb34d748ed199f0275472f8) | [demo kit latest release](https://openui5.hana.ondemand.com/#/topic/ee8726adfdb34d748ed199f0275472f8)</div>

## Developing OpenUI5

This section provides information for the initial setup, development workflow, and how tests are executed.

***

### Setting Up the OpenUI5 Development Environment

OpenUI5 content is developed in an environment based on Node.js. [UI5 Tooling](https://sap.github.io/ui5-tooling/) is used as development server and build tool.

***

#### Basic Setup

The basic setup allows you to start a server for the OpenUI5 project in an easy way:

1.  Install [Node.js](http://nodejs.org/). This also includes npm, the node package manager.

2.  Clone the OpenUI5 Git repository. You can download and install Git from [http://git-scm.com/download](http://git-scm.com/download):

    ```
    git clone https://github.com/SAP/openui5.git
    ```

3.  Install all npm dependencies. Optionally, you can also use Yarn for this. This is described in the Advanced Setup section.

    ```
    cd openui5
    npm install
    ```

4.  Start the server and open the TestSuite:

    ```
    npm run testsuite
    ```

    To just start the server, enter:

    ```
    npm start
    ```

5.  Your default browser should open automatically and show the TestSuite: You're done!


***

#### Configuring the TestSuite Server

The OpenUI5 TestSuite server can be configured using environment variables. For example, to allow remote access to the server, that is, from an interface other than your computer's loopback/localhost, you can configure the server as follows:

```
OPENUI5_SRV_ACC_RMT_CON=true npm start
```

The following server configuration is available:

-   `OPENUI5_SRV_OPEN=index.html`

-   `OPENUI5_SRV_ACC_RMT_CON=true`

-   `OPENUI5_SRV_PORT=9090`


***

#### Advanced Setup

The basic setup described above uses a custom setup focused on starting the [UI5 server](https://sap.github.io/ui5-tooling/pages/Server/) for the OpenUI5 TestSuite project in an easy way.

The advanced setup allows you to use the [UI5 CLI](https://sap.github.io/ui5-tooling/pages/CLI/) and all of its features. The use of Yarn is required in this setup, as npm cannot handle workspaces yet.

Use the advanced setup if you plan to do any of the following:

-   Build an OpenUI5 project.

-   Serve a project with HTTPS or HTTP/2.

-   Use any of the other UI5 CLI features and parameters.


For the advanced setup, proceed as follows:

1.  Install the UI5 Tooling CLI globally, see [UI5 Tooling: Installing the UI5 CLI](https://sap.github.io/ui5-tooling/pages/CLI/).

2.  Install Yarn. See [FAQ: What's the thing with Yarn?](https://sap.github.io/ui5-tooling/pages/FAQ/#whats-the-thing-with-yarn).

3.  In the OpenUI5 repository root directory, install all dependencies using Yarn. This also links all OpenUI5 libraries between each other.

    ```
    yarn
    ```

4.  Navigate into the TestSuite project and start the UI5 server:

    ```
    cd src/testsuite
    ui5 serve --open index.html
    ```


You can now use the UI5 CLI in any of your local OpenUI5 libraries. For details, check the [UI5 CLI documentation](https://sap.github.io/ui5-tooling/pages/CLI/).

Whenever you make changes to your OpenUI5 repository's `node_modules` directory \(e.g. by executing `npm install`\), you may need to recreate the links between the OpenUI5 libraries. You can always do this by executing `yarn` in the OpenUI5 root directory.

***

#### Legacy Setup

You can continue to use the legacy Grunt-based setup. However, the setups described above are recommended for working with the OpenUI5 repository.

To use the legacy setup, execute `npm run start-grunt`. Note that in the past this was the default `npm start` behavior.

The legacy setup has the following differences to the standard setups as described above:

-   `testsuite` path prefix:

    Standard setup: `http://localhost:8080/test-resources/testsuite/testframe.html`

    Legacy setup: `http://localhost:8080/testsuite/test-resources/testsuite/testframe.html`

-   SDK documentation generated by `grunt docs` can only be served using the legacy setup.

***

<a name="loioee8726adfdb34d748ed199f0275472f8__section_stp_zzq_yfb"/>

### The Development Process

For a regular development, no build is required. Just modify any source file and reload your browser. Now that's simple, isn't it?

This build-free development process does not feature optimized runtime performance. For example, there are many small requests, which would not be acceptable for remote connections. But it is the most convenient way to modify the OpenUI5 sources. Under the hood there are mainly two mechanisms applied that adapt the sources:

-   The Git repository path contains a folder named like the respective control library \(e.g. "sap.m"\), which is omitted at runtime. The UI5 CLI server is mapping the locations.

-   The CSS files are transformed \(server-side\) by the LESS pre-processor during the first request after a CSS file has been modified. This includes mirroring for right-to-left support.


When you work on OpenUI5 applications or libraries that already make use of the OpenUI5 npm packages, such as the OpenUI5 sample app, you can link your local OpenUI5 repository into that project. This allows you to make changes to the project itself as well as to the OpenUI5 libraries simultaneously and test them immediately.

For a detailed step-by-step guide on how to achieve such a setup with the OpenUI5 sample app, see [Working With Local Dependencies](https://github.com/SAP/openui5-sample-app#working-with-local-dependencies).

***

#### Building OpenUI5

The UI5 Tooling is used to build a production-ready version of OpenUI5. Every library needs to be built individually.

Usage:

```
ui5 build
```

The build is responsible for the following tasks:

-   Creation of the bundled `library.css` and `library-RTL.css` file for all available themes

-   Minification of CSS

-   Minification of JavaScript

-   Bundling the JavaScript modules of the libraries into a single `library-preload.js` file

-   Bundling of the most important OpenUI5 Core modules into `sap-ui-core.js`


If you encounter errors like the one below, execute `yarn` in the OpenUI5 root directory. There may be new build tools required which need to be downloaded first.

```
Error: Cannot find module 'xyz'
```

***

#### Testing OpenUI5

All OpenUI5 code must conform to a certain ruleset which is checked with ESLint.

To run an ESLint check, navigate to the root directory of the repository and execute:

```
npm run lint
```

***

<a name="loioee8726adfdb34d748ed199f0275472f8__section_vqb_p1w_jjb"/>

### Running Tests

Tests can be executed automatically with the Karma Test-Runner.

To run tests of a library, the `--lib` needs to be passed. The `<library-name>` corresponds to the folder within `./src/`, e.g. `sap.m`.

``` js
npm run karma -- --lib=<library-name>
```

This executes all tests of that library in watch mode, which will automatically re-run tests in case of file changes.

**Example** 

``` js
npm run karma -- --lib=sap.m
```

***

#### Running a Specific Test

Instead of executing all tests of a library, you can also only run one test or a testsuite.

To find the URL, open `http://localhost:8080/test.html` and search for the test. Copy the URL and remove the origin part \(`http://localhost:8080/`\), so that it starts with `resources` or `test-resources`.

``` js
npm run karma -- --lib=<library-name> --ui5.testpage="<testpage-url>"
```

> ### Note:  
> The corresponding `--lib` option still needs to be provided accordingly.

**Example**

```
npm run karma -- --lib=sap.m --ui5.testpage="resources/sap/ui/test/starter/Test.qunit.html?testsuite=test-resources/sap/m/qunit/testsuite.mobile.qunit&test=Button"
```

***

#### Coverage

You enable coverage reporting by additionally passing the `--coverage` option:

``` js
npm run karma -- --lib=<library-name> --coverage
```

***

#### Continuous integration \(CI\)

You enable the continuous integration mode by additionally passing the `--ci` option. This enables Chrome headless and disables the watch mode, so the execution stops after all tests have been executed:

``` js
npm run karma -- --lib=<library-name> --ci
```

You can combine the options `--ci` and `--coverage`.

